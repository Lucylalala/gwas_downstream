# Selection of candidate intervals and blocks

* script path = /home/pub3114/Desktop/GWAS_group/Interval_block_handle
* candihap_path = /home/pub3114/Desktop/GWAS_group/CandiHap-1.3.0

1. `python Interval_block_handle/Gapit_result_summary.py -input dir(path where run Gapit end with "/")`
2. `mkdir Interval`
3. `cd Interval/`
4. `python Interval_block_handle/Gwas_Interval_select.py -vcf /home/pub3114/Desktop/GWAS_study/GWAS_study1/clean_wheat_660k1.vcf -summary final_summarize.xlsx(summary generated in procedure1) -processes 8`
5. `python Interval_block_handle/Gwas_block_select.py -input dir(the path of Interval)`
6. `python gff_generation.py -input all_blocks_details.xlsx(generated by Gwas_block_select.py in procedure5) -export Target_traits_blocks.gff`
7. `cd ..`
8. `mkdir block_vcf`
9. `python Interval_block_handle/blocks_vcfgenerate.py -vcf clean_wheat_660k1.vcf -blocks Interval_block/all_blocks_details.xlsx -output filtered_blocks.vcf -block_output_dir block_vcf/ -processes 8`
10. `python Interval_block_handle/blockvcf2hmp.py -dir block_vcf/ -output block_vcf/hmpfile/`
11. `python Interval_block_handle/blockvcf2hmp.py --combine -dir block_vcf/hmpfile/ -output block_vcf/combined.hmp.txt`
12. create a new dir and to run the sh below

```
#!/bin/bash

# Define paths to the required files and scripts
CANDIHAP_PATH=""
COMBINED_HMP_PATH=""
COLD_BLOCKS_PATH=""
PHENOTYPE_PATH=""
BLOCKS_FILE=""

# Read each block from blocks.txt and run the CandiHap.pl script
while read -r block; do
    # Create a directory for the current block and change to that directory
    mkdir -p "$block"
    cd "$block"

    # Run the CandiHap.pl script with the current block
    perl $CANDIHAP_PATH -m $COMBINED_HMP_PATH -f $COLD_BLOCKS_PATH -l 1 -g "$block" -p $PHENOTYPE_PATH

    # Go back to the parent directory for the next iteration
    cd ..

done < "$BLOCKS_FILE"
```

